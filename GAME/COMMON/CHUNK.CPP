#include "NFS4.H"
#include "CHUNK.H"

// decompiled code
// original method signature: 
// void /*$ra*/ InstanceGroup__5ChunkP15SerializedGroupP9SimpleMem(struct Chunk *this /*$s2*/, struct SerializedGroup *chunkGroup /*$s5*/, struct SimpleMem *mem /*$s3*/)
 // line 83, offset 0x8008b3fc
	/* begin block 1 */
		// Start line: 84
		// Start offset: 0x8008B3FC

		/* begin block 1.1 */
			// Start line: 84
			// Start offset: 0x8008B3FC

			/* begin block 1.1.1 */
				// Start line: 84
				// Start offset: 0x8008B3FC

				/* begin block 1.1.1.1 */
					// Start line: 84
					// Start offset: 0x8008B3FC
				/* end block 1.1.1.1 */
				// End offset: 0x8008B3FC
				// End Line: 84
			/* end block 1.1.1 */
			// End offset: 0x8008B3FC
			// End Line: 84
		/* end block 1.1 */
		// End offset: 0x8008B3FC
		// End Line: 84

		/* begin block 1.2 */
			// Start line: 84
			// Start offset: 0x8008B3FC

			/* begin block 1.2.1 */
				// Start line: 117
				// Start offset: 0x8008B538
				// Variables:
			// 		struct SerializedGroup *instGroup; // $s1
			// 		struct SerializedGroup *simGroup; // $s4

				/* begin block 1.2.1.1 */
					// Start line: 121
					// Start offset: 0x8008B538

					/* begin block 1.2.1.1.1 */
						// Start line: 125
						// Start offset: 0x8008B560
						// Variables:
					// 		int i; // $a2
					// 		int numElements; // $s0

						/* begin block 1.2.1.1.1.1 */
							// Start line: 126
							// Start offset: 0x8008B560
							// Variables:
						// 		struct SerializedGroup *this; // $s4

							/* begin block 1.2.1.1.1.1.1 */
								// Start line: 126
								// Start offset: 0x8008B560
							/* end block 1.2.1.1.1.1.1 */
							// End offset: 0x8008B560
							// End Line: 126
						/* end block 1.2.1.1.1.1 */
						// End offset: 0x8008B560
						// End Line: 126

						/* begin block 1.2.1.1.1.2 */
							// Start line: 126
							// Start offset: 0x8008B560
							// Variables:
						// 		struct SerializedGroup *this; // $s4

							/* begin block 1.2.1.1.1.2.1 */
								// Start line: 126
								// Start offset: 0x8008B560
							/* end block 1.2.1.1.1.2.1 */
							// End offset: 0x8008B560
							// End Line: 126
						/* end block 1.2.1.1.1.2 */
						// End offset: 0x8008B560
						// End Line: 126

						/* begin block 1.2.1.1.1.3 */
							// Start line: 130
							// Start offset: 0x8008B578
							// Variables:
						// 		struct Trk_SimpleInst *inst; // $a0

							/* begin block 1.2.1.1.1.3.1 */
								// Start line: 137
								// Start offset: 0x8008B594
								// Variables:
							// 		struct SerializedGroup *this; // $s1

								/* begin block 1.2.1.1.1.3.1.1 */
									// Start line: 137
									// Start offset: 0x8008B594
								/* end block 1.2.1.1.1.3.1.1 */
								// End offset: 0x8008B594
								// End Line: 137
							/* end block 1.2.1.1.1.3.1 */
							// End offset: 0x8008B594
							// End Line: 137

							/* begin block 1.2.1.1.1.3.2 */
								// Start line: 137
								// Start offset: 0x8008B594
								// Variables:
							// 		int index; // $v1

								/* begin block 1.2.1.1.1.3.2.1 */
									// Start line: 137
									// Start offset: 0x8008B594

									/* begin block 1.2.1.1.1.3.2.1.1 */
										// Start line: 137
										// Start offset: 0x8008B594
										// Variables:
									// 		struct SerializedGroup *this; // $s1

										/* begin block 1.2.1.1.1.3.2.1.1.1 */
											// Start line: 137
											// Start offset: 0x8008B594
										/* end block 1.2.1.1.1.3.2.1.1.1 */
										// End offset: 0x8008B594
										// End Line: 137
									/* end block 1.2.1.1.1.3.2.1.1 */
									// End offset: 0x8008B594
									// End Line: 137
								/* end block 1.2.1.1.1.3.2.1 */
								// End offset: 0x8008B5AC
								// End Line: 147
							/* end block 1.2.1.1.1.3.2 */
							// End offset: 0x8008B5CC
							// End Line: 149

							/* begin block 1.2.1.1.1.3.3 */
								// Start line: 152
								// Start offset: 0x8008B5CC

								/* begin block 1.2.1.1.1.3.3.1 */
									// Start line: 153
									// Start offset: 0x8008B5E4
								/* end block 1.2.1.1.1.3.3.1 */
								// End offset: 0x8008B600
								// End Line: 159
							/* end block 1.2.1.1.1.3.3 */
							// End offset: 0x8008B600
							// End Line: 159
						/* end block 1.2.1.1.1.3 */
						// End offset: 0x8008B600
						// End Line: 164
					/* end block 1.2.1.1.1 */
					// End offset: 0x8008B60C
					// End Line: 174
				/* end block 1.2.1.1 */
				// End offset: 0x8008B634
				// End Line: 179

				/* begin block 1.2.1.2 */
					// Start line: 183
					// Start offset: 0x8008B634

					/* begin block 1.2.1.2.1 */
						// Start line: 184
						// Start offset: 0x8008B63C
						// Variables:
					// 		int numElements; // $a0
					// 		int i; // $s0
					// 		int size; // $a3
					// 		struct Trk_SimpleInst *inst; // $v1

						/* begin block 1.2.1.2.1.1 */
							// Start line: 184
							// Start offset: 0x8008B63C
							// Variables:
						// 		struct SerializedGroup *this; // $s1

							/* begin block 1.2.1.2.1.1.1 */
								// Start line: 184
								// Start offset: 0x8008B63C
							/* end block 1.2.1.2.1.1.1 */
							// End offset: 0x8008B63C
							// End Line: 184
						/* end block 1.2.1.2.1.1 */
						// End offset: 0x8008B63C
						// End Line: 184

						/* begin block 1.2.1.2.1.2 */
							// Start line: 184
							// Start offset: 0x8008B63C
							// Variables:
						// 		struct SerializedGroup *this; // $s1

							/* begin block 1.2.1.2.1.2.1 */
								// Start line: 184
								// Start offset: 0x8008B63C
							/* end block 1.2.1.2.1.2.1 */
							// End offset: 0x8008B63C
							// End Line: 184
						/* end block 1.2.1.2.1.2 */
						// End offset: 0x8008B63C
						// End Line: 184

						/* begin block 1.2.1.2.1.3 */
							// Start line: 190
							// Start offset: 0x8008B650

							/* begin block 1.2.1.2.1.3.1 */
								// Start line: 192
								// Start offset: 0x8008B65C

								/* begin block 1.2.1.2.1.3.1.1 */
									// Start line: 193
									// Start offset: 0x8008B66C
								/* end block 1.2.1.2.1.3.1.1 */
								// End offset: 0x8008B67C
								// End Line: 196
							/* end block 1.2.1.2.1.3.1 */
							// End offset: 0x8008B68C
							// End Line: 198
						/* end block 1.2.1.2.1.3 */
						// End offset: 0x8008B68C
						// End Line: 200
					/* end block 1.2.1.2.1 */
					// End offset: 0x8008B6A0
					// End Line: 204
				/* end block 1.2.1.2 */
				// End offset: 0x8008B6C0
				// End Line: 207

				/* begin block 1.2.1.3 */
					// Start line: 210
					// Start offset: 0x8008B6C0

					/* begin block 1.2.1.3.1 */
						// Start line: 211
						// Start offset: 0x8008B6E0
						// Variables:
					// 		struct Trk_SimObject *simObjs; // $v1
					// 		int count; // $a1

						/* begin block 1.2.1.3.1.1 */
							// Start line: 211
							// Start offset: 0x8008B6E0
							// Variables:
						// 		struct SerializedGroup *this; // $s4

							/* begin block 1.2.1.3.1.1.1 */
								// Start line: 211
								// Start offset: 0x8008B6E0
							/* end block 1.2.1.3.1.1.1 */
							// End offset: 0x8008B6E0
							// End Line: 211
						/* end block 1.2.1.3.1.1 */
						// End offset: 0x8008B6E0
						// End Line: 211

						/* begin block 1.2.1.3.1.2 */
							// Start line: 211
							// Start offset: 0x8008B6E0

							/* begin block 1.2.1.3.1.2.1 */
								// Start line: 211
								// Start offset: 0x8008B6E0
							/* end block 1.2.1.3.1.2.1 */
							// End offset: 0x8008B6E0
							// End Line: 211
						/* end block 1.2.1.3.1.2 */
						// End offset: 0x8008B6E0
						// End Line: 211

						/* begin block 1.2.1.3.1.3 */
							// Start line: 214
							// Start offset: 0x8008B6FC

							/* begin block 1.2.1.3.1.3.1 */
								// Start line: 215
								// Start offset: 0x8008B708

								/* begin block 1.2.1.3.1.3.1.1 */
									// Start line: 215
									// Start offset: 0x8008B708
									// Variables:
								// 		struct Group *this; // $v0

									/* begin block 1.2.1.3.1.3.1.1.1 */
										// Start line: 215
										// Start offset: 0x8008B708
									/* end block 1.2.1.3.1.3.1.1.1 */
									// End offset: 0x8008B708
									// End Line: 215
								/* end block 1.2.1.3.1.3.1.1 */
								// End offset: 0x8008B708
								// End Line: 215
							/* end block 1.2.1.3.1.3.1 */
							// End offset: 0x8008B728
							// End Line: 218
						/* end block 1.2.1.3.1.3 */
						// End offset: 0x8008B728
						// End Line: 218
					/* end block 1.2.1.3.1 */
					// End offset: 0x8008B730
					// End Line: 218
				/* end block 1.2.1.3 */
				// End offset: 0x8008B730
				// End Line: 218
			/* end block 1.2.1 */
			// End offset: 0x8008B730
			// End Line: 218
		/* end block 1.2 */
		// End offset: 0x8008B730
		// End Line: 218

		/* begin block 1.3 */
			// Start line: 225
			// Start offset: 0x8008B730
			// Variables:
		// 		struct SerializedGroup *geomGroup; // $s1

			/* begin block 1.3.1 */
				// Start line: 225
				// Start offset: 0x8008B730

				/* begin block 1.3.1.1 */
					// Start line: 225
					// Start offset: 0x8008B730
				/* end block 1.3.1.1 */
				// End offset: 0x8008B730
				// End Line: 225
			/* end block 1.3.1 */
			// End offset: 0x8008B730
			// End Line: 225

			/* begin block 1.3.2 */
				// Start line: 225
				// Start offset: 0x8008B730

				/* begin block 1.3.2.1 */
					// Start line: 225
					// Start offset: 0x8008B730
				/* end block 1.3.2.1 */
				// End offset: 0x8008B730
				// End Line: 225
			/* end block 1.3.2 */
			// End offset: 0x8008B730
			// End Line: 225
		/* end block 1.3 */
		// End offset: 0x8008B730
		// End Line: 225
	/* end block 1 */
	// End offset: 0x8008B730
	// End Line: 225

void InstanceGroup__5ChunkP15SerializedGroupP9SimpleMem( (Chunk *this,SerializedGroup *chunkGroup,SimpleMem *mem)
{
  char cVar1;
  short sVar2;
  SerializedGroup *source;
  Group *pGVar3;
  SerializedGroup *source_00;
  Trk_Quad *pTVar4;
  uint uVar5;
  SerializedGroup *pSVar6;
  SerializedGroup *pSVar7;
  int iVar8;
  int iVar9;
  int dataSize;
  
  source = LocateGroupType__15SerializedGroupii(chunkGroup,0x1c,0);
  this->firstSimSliceInd = *(short *)((int)&source[1].dummy + 2);
  this->boundPts[0] = *(RelCoord16 *)&source[2].m_type;
  this->boundPts[1] = *(RelCoord16 *)&source[2].m_length;
  this->boundPts[2] = *(RelCoord16 *)&source[2].dummy;
  this->boundPts[3] = *(RelCoord16 *)&source[2].m_num_elements;
  this->chunkboundPts[0] = *(RelCoord16 *)&source[3].m_type;
  this->chunkboundPts[1] = *(RelCoord16 *)&source[3].m_length;
  this->chunkboundPts[2] = *(RelCoord16 *)&source[3].dummy;
  this->chunkboundPts[3] = *(RelCoord16 *)&source[3].m_num_elements;
  this->chunkInd = *(short *)&source[1].m_num_elements;
  if (DAT_801131f8 != 1) {
    pGVar3 = LocateCreateGroupType__15SerializedGroupiP9SimpleMemi(chunkGroup,3,mem,0);
    this->objInstanceBuf = pGVar3;
    pGVar3 = LocateCreateGroupType__15SerializedGroupiP9SimpleMemi(chunkGroup,0xb,mem,0);
    this->simObjBuf = pGVar3;
    goto LAB_8008b734;
  }
  source = LocateGroupType__15SerializedGroupii(chunkGroup,0xb,0);
  source_00 = LocateGroupType__15SerializedGroupii(chunkGroup,3,0);
  if (source == (SerializedGroup *)0x0) {
LAB_8008b630:
    this->simObjBuf = (Group *)0x0;
  }
  else {
    iVar9 = 0;
    pSVar6 = source + 1;
    while (iVar9 < source->m_num_elements) {
      if (*(char *)((int)&pSVar6[1].m_type + 2) != '\x7f') {
        uVar5 = (uint)*(byte *)((int)&pSVar6[1].m_type + 2);
        pSVar7 = source_00 + 1;
        if (source_00->m_num_elements <= (int)uVar5) break;
        while (uVar5 = uVar5 - 1, uVar5 != 0xffffffff) {
          pSVar7 = (SerializedGroup *)((int)&pSVar7->m_type + (int)*(short *)&pSVar7->m_type);
        }
        if (((pSVar7 == (SerializedGroup *)0x0) || (*(char *)((int)&pSVar7->m_type + 2) != '\x05'))
           || (*(char *)((int)&pSVar7[2].m_type + 3) != '\0')) break;
      }
      pSVar6 = (SerializedGroup *)&pSVar6[1].m_length;
      iVar9 = iVar9 + 1;
    }
    if (iVar9 == 0) goto LAB_8008b630;
    pGVar3 = CreateLiteGroupDataSize__15SerializedGroupP15SerializedGroupP9SimpleMemi
                       (chunkGroup,source,mem,iVar9 * 0x14);
    this->simObjBuf = pGVar3;
    pGVar3->m_num_elements = iVar9;
  }
  iVar9 = 0;
  if (source_00 == (SerializedGroup *)0x0) {
    this->objInstanceBuf = (Group *)0x0;
  }
  else {
    dataSize = 0;
    pSVar6 = source_00 + 1;
    while (iVar9 < source_00->m_num_elements) {
      cVar1 = *(char *)((int)&pSVar6->m_type + 2);
      if (cVar1 == '\x05') {
        if (*(char *)((int)&pSVar6[2].m_type + 3) != '\0') break;
      }
      else {
        if (cVar1 != '\x01') break;
      }
      iVar9 = iVar9 + 1;
      dataSize = dataSize + (int)*(short *)&pSVar6->m_type;
      pSVar6 = (SerializedGroup *)((int)&pSVar6->m_type + (int)*(short *)&pSVar6->m_type);
    }
    pGVar3 = CreateLiteGroupDataSize__15SerializedGroupP15SerializedGroupP9SimpleMemi
                       (chunkGroup,source_00,mem,dataSize);
    this->objInstanceBuf = pGVar3;
    pGVar3->m_num_elements = iVar9;
  }
  if ((this->simObjBuf != (Group *)0x0) && (this->objInstanceBuf != (Group *)0x0)) {
    dataSize = this->simObjBuf->m_num_elements;
    iVar9 = (int)source + dataSize * 0x14 + 0x10;
    while( true ) {
      iVar8 = iVar9;
      dataSize = dataSize + -1;
      if (dataSize == -1) break;
      iVar9 = iVar8 + -0x14;
      if (this->objInstanceBuf->m_num_elements <= (int)(uint)*(byte *)(iVar8 + -2)) {
        *(undefined *)(iVar8 + -2) = 0x7f;
        iVar9 = iVar8 + -0x14;
      }
    }
  }
LAB_8008b734:
  pGVar3 = LocateCreateGroupType__15SerializedGroupiP9SimpleMemi(chunkGroup,0x15,mem,0);
  this->objSpecialInstanceBuf = pGVar3;
  pGVar3 = LocateCreateGroupType__15SerializedGroupiP9SimpleMemi(chunkGroup,10,mem,0);
  this->sfxBuf = pGVar3;
  pGVar3 = LocateCreateGroupType__15SerializedGroupiP9SimpleMemi(chunkGroup,5,mem,0);
  this->simQuadBuf = pGVar3;
  pGVar3 = LocateCreateGroupType__15SerializedGroupiP9SimpleMemi(chunkGroup,6,mem,0);
  this->simSliceBuf = pGVar3;
  pGVar3 = LocateCreateGroupType__15SerializedGroupiP9SimpleMemi(chunkGroup,9,mem,0);
  this->lineBuf = pGVar3;
  source = LocateGroupType__15SerializedGroupii(chunkGroup,0x17,0);
  source_00 = LocateGroupType__15SerializedGroupii(source,0x1b,0);
  this->quadCounts[0] = *(uchar *)&source_00[1].m_num_elements;
  this->quadCounts[1] = *(uchar *)((int)&source_00[1].m_num_elements + 2);
  this->quadCounts[2] = *(uchar *)&source_00[2].m_type;
  this->quadCounts[3] = *(uchar *)((int)&source_00[2].m_type + 2);
  this->quadCounts[4] = *(uchar *)&source_00[2].m_length;
  this->quadCounts[5] = *(uchar *)((int)&source_00[2].m_length + 2);
  pGVar3 = LocateCreateGroupType__15SerializedGroupiP9SimpleMemi(source,0x19,mem,0);
  pTVar4 = (Trk_Quad *)(pGVar3 + 1);
  this->renderQuads[0] = pTVar4;
  pTVar4 = pTVar4 + (int)*(short *)&source_00[1].m_num_elements;
  this->renderQuads[1] = pTVar4;
  sVar2 = *(short *)((int)&source_00[1].m_num_elements + 2);
  this->renderQuads[2] = pTVar4 + (int)sVar2;
  this->renderQuads[3] = pTVar4 + (int)sVar2 + (int)*(short *)&source_00[2].m_length;
  pGVar3 = LocateCreateGroupType__15SerializedGroupiP9SimpleMemi(source,0x1a,mem,0);
  this->stripBuf = pGVar3;
  pGVar3 = LocateCreateGroupType__15SerializedGroupiP9SimpleMemi(source,0x25,mem,0);
  this->lorezstripBuf = pGVar3;
  pGVar3 = LocateCreateGroupType__15SerializedGroupiP9SimpleMemi(source,0x18,mem,0);
  this->vertexBuf = pGVar3;
  pGVar3 = LocateCreateGroupType__15SerializedGroupiP9SimpleMemi(source,0x27,mem,0);
  this->objVertexBuf = pGVar3;
  pGVar3 = LocateCreateGroupType__15SerializedGroupiP9SimpleMemi(source,0x28,mem,0);
  this->objQuadBuf = pGVar3;
  pGVar3 = LocateCreateGroupType__15SerializedGroupiP9SimpleMemi(source,0x29,mem,0);
  this->objQuadInstanceBuf = pGVar3;
  return;


}




// decompiled code
// original method signature: 
// void /*$ra*/ Chunk_UpdateSys__FP13DRender_tView(struct DRender_tView *Vi /*$a0*/)
 // line 274, offset 0x8008b920
	/* begin block 1 */
		// Start line: 275
		// Start offset: 0x8008B920
	/* end block 1 */
	// End offset: 0x8008B920
	// End Line: 275

void Chunk_UpdateSys__FP13DRender_tView(DRender_tView *Vi)
{
  return;


}




// decompiled code
// original method signature: 
// void /*$ra*/ Chunk_Init__Fv()
 // line 291, offset 0x8008b928
	/* begin block 1 */
		// Start line: 292
		// Start offset: 0x8008B928
	/* end block 1 */
	// End offset: 0x8008B928
	// End Line: 292

void Chunk_Init__Fv(void)
{
  return;


}




// decompiled code
// original method signature: 
// void /*$ra*/ Chunk_DeInit__Fv()
 // line 310, offset 0x8008b930
	/* begin block 1 */
		// Start line: 311
		// Start offset: 0x8008B930
	/* end block 1 */
	// End offset: 0x8008B930
	// End Line: 311

void Chunk_DeInit__Fv(void)
{
  return;


}





